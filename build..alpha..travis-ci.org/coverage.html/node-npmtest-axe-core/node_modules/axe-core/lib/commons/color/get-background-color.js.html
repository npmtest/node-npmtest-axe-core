<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-axe-core/node_modules/axe-core/lib/commons/color/get-background-color.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-axe-core">npmtest-axe-core (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-axe-core/node_modules/axe-core/lib/commons/color/get-background-color.js</span></h1>
    <h2>
        
        Statements: <span class="metric">7.41% <small>(6 / 81)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 48)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 7)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">7.41% <small>(6 / 81)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-axe-core/node_modules/axe-core/lib/commons/color/</a> &#187; get-background-color.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/* global axe, color, dom */
const graphicNodes = [
	'IMG', 'CANVAS', 'OBJECT', 'IFRAME', 'VIDEO', 'SVG'
];
&nbsp;
<span class="fstat-no" title="function not covered" >function elmHasImage(elm, style) {</span>
<span class="cstat-no" title="statement not covered" >	var nodeName = elm.nodeName.toUpperCase();</span>
<span class="cstat-no" title="statement not covered" >	if (graphicNodes.includes(nodeName)) {</span>
<span class="cstat-no" title="statement not covered" >		axe.commons.color.incompleteData.set('bgColor', {</span>
			node: elm,
			reason: 'imgNode'
		});
<span class="cstat-no" title="statement not covered" >		return true;</span>
	}
&nbsp;
<span class="cstat-no" title="statement not covered" >	style = style || window.getComputedStyle(elm);</span>
<span class="cstat-no" title="statement not covered" >	var bgImageStyle = style.getPropertyValue('background-image');</span>
<span class="cstat-no" title="statement not covered" >	var hasBgImage = bgImageStyle !== 'none';</span>
<span class="cstat-no" title="statement not covered" >	if (hasBgImage) {</span>
<span class="cstat-no" title="statement not covered" >		var hasGradient = /gradient/.test(bgImageStyle);</span>
<span class="cstat-no" title="statement not covered" >		axe.commons.color.incompleteData.set('bgColor', {</span>
			node: elm,
			reason: (hasGradient ? 'bgGradient' : 'bgImage')
		});
	}
<span class="cstat-no" title="statement not covered" >	return hasBgImage;</span>
}
&nbsp;
/**
 * Returns the non-alpha-blended background color of an element
 * @param {Element} elm
 * @return {Color}
 */
<span class="fstat-no" title="function not covered" >function getBgColor(elm, elmStyle) {</span>
<span class="cstat-no" title="statement not covered" >	elmStyle = elmStyle || window.getComputedStyle(elm);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >	let bgColor = new color.Color();</span>
<span class="cstat-no" title="statement not covered" >	bgColor.parseRgbString( elmStyle.getPropertyValue('background-color'));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >	if (bgColor.alpha !== 0) {</span>
<span class="cstat-no" title="statement not covered" >		let opacity = elmStyle.getPropertyValue('opacity');</span>
<span class="cstat-no" title="statement not covered" >		bgColor.alpha = bgColor.alpha * opacity;</span>
	}
<span class="cstat-no" title="statement not covered" >	return bgColor;</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function calculateObscuringAlpha(elmIndex, elmStack) {</span>
<span class="cstat-no" title="statement not covered" >	var totalAlpha = 0;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >	if (elmIndex &gt; 0) {</span>
		// there are elements above our element, check if they are contribute to the background
<span class="cstat-no" title="statement not covered" >		for (var i = elmIndex - 1; i &gt;= 0; i--) {</span>
<span class="cstat-no" title="statement not covered" >			let bgElm = elmStack[i];</span>
<span class="cstat-no" title="statement not covered" >			let bgElmStyle = window.getComputedStyle(bgElm);</span>
<span class="cstat-no" title="statement not covered" >			let bgColor = getBgColor(bgElm, bgElmStyle);</span>
<span class="cstat-no" title="statement not covered" >			if (bgColor.alpha) {</span>
<span class="cstat-no" title="statement not covered" >				totalAlpha += bgColor.alpha;</span>
			} else {
				// remove elements not contributing to the background
<span class="cstat-no" title="statement not covered" >				elmStack.splice(i, 1);</span>
			}
		}
	}
<span class="cstat-no" title="statement not covered" >	return totalAlpha;</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function elmOutsideParent(elm, bgElm, bgColor) {</span>
<span class="cstat-no" title="statement not covered" >	var visible = (elm !== bgElm &amp;&amp; !dom.visuallyContains(elm, bgElm) &amp;&amp; bgColor.alpha !== 0);</span>
<span class="cstat-no" title="statement not covered" >	return visible;</span>
}
/**
 * Get all elements rendered underneath the current element,
 * in the order in which it is rendered
 */
color.getBackgroundStack = <span class="fstat-no" title="function not covered" >function(elm) {</span>
<span class="cstat-no" title="statement not covered" >	let rect = elm.getBoundingClientRect();</span>
<span class="cstat-no" title="statement not covered" >	let x, y;</span>
<span class="cstat-no" title="statement not covered" >	if (rect.left &gt; window.innerWidth) {</span>
<span class="cstat-no" title="statement not covered" >		return;</span>
	}
<span class="cstat-no" title="statement not covered" >	if (rect.top &gt; window.innerHeight) {</span>
<span class="cstat-no" title="statement not covered" >		return;</span>
	}
<span class="cstat-no" title="statement not covered" >	x = Math.min(</span>
			Math.ceil(rect.left + (rect.width / 2)),
			window.innerWidth - 1);
<span class="cstat-no" title="statement not covered" >	y = Math.min(</span>
			Math.ceil(rect.top + (rect.height / 2)),
			window.innerHeight - 1);
&nbsp;
<span class="cstat-no" title="statement not covered" >	let elmStack = document.elementsFromPoint(x, y);</span>
<span class="cstat-no" title="statement not covered" >	elmStack = dom.reduceToElementsBelowFloating(elmStack, elm);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >	let bodyIndex = elmStack.indexOf(document.body);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >	if (// Check that the body background is the page's background</span>
		bodyIndex &gt; 1 &amp;&amp; // only if there are negative z-index elements
		!elmHasImage(document.documentElement) &amp;&amp;
		getBgColor(document.documentElement).alpha === 0
	) {
		// Remove body and html from it's current place
<span class="cstat-no" title="statement not covered" >		elmStack.splice(bodyIndex, 1);</span>
<span class="cstat-no" title="statement not covered" >		elmStack.splice( elmStack.indexOf(document.documentElement), 1);</span>
&nbsp;
		// Put the body background as the lowest element
<span class="cstat-no" title="statement not covered" >		elmStack.push(document.body);</span>
	}
&nbsp;
	// Return all elements BELOW the current element, null if the element is undefined
<span class="cstat-no" title="statement not covered" >	let elmIndex = elmStack.indexOf(elm);</span>
<span class="cstat-no" title="statement not covered" >	if (calculateObscuringAlpha(elmIndex, elmStack) &gt;= 0.99) {</span>
		// if the total of the elements above our element results in total obscuring, return null
<span class="cstat-no" title="statement not covered" >		axe.commons.color.incompleteData.set('bgColor', {</span>
			node: elm,
			reason: 'bgOverlap'
		});
<span class="cstat-no" title="statement not covered" >		return null;</span>
	}
<span class="cstat-no" title="statement not covered" >	return elmIndex !== -1 ? elmStack : null;</span>
};
&nbsp;
<span class="cstat-no" title="statement not covered" >color.getBackgroundColor = <span class="fstat-no" title="function not covered" >function(elm, bgElms = [], noScroll = false) {</span></span>
<span class="cstat-no" title="statement not covered" >	if(noScroll !== true) {</span>
<span class="cstat-no" title="statement not covered" >		elm.scrollIntoView();</span>
	}
<span class="cstat-no" title="statement not covered" >	let bgColors = [];</span>
<span class="cstat-no" title="statement not covered" >	let elmStack = color.getBackgroundStack(elm);</span>
&nbsp;
	// Search the stack until we have an alpha === 1 background
<span class="cstat-no" title="statement not covered" >	(elmStack || []).some((bgElm) =&gt; {</span>
<span class="cstat-no" title="statement not covered" >		let bgElmStyle = window.getComputedStyle(bgElm);</span>
&nbsp;
		// Get the background color
<span class="cstat-no" title="statement not covered" >		let bgColor = getBgColor(bgElm, bgElmStyle);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >		if (// abort if a node is outside it's parent and its parent has a background</span>
			elmOutsideParent(elm, bgElm, bgColor) ||
			// OR if the background elm is a graphic
			elmHasImage(bgElm, bgElmStyle)
		) {
<span class="cstat-no" title="statement not covered" >			bgColors = null;</span>
<span class="cstat-no" title="statement not covered" >			bgElms.push(bgElm);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >			return true;</span>
		}
&nbsp;
<span class="cstat-no" title="statement not covered" >		if (bgColor.alpha !== 0) {</span>
			// store elements contributing to the br color.
<span class="cstat-no" title="statement not covered" >			bgElms.push(bgElm);</span>
<span class="cstat-no" title="statement not covered" >			bgColors.push(bgColor);</span>
&nbsp;
			// Exit if the background is opaque
<span class="cstat-no" title="statement not covered" >			return (bgColor.alpha === 1);</span>
		} else {
<span class="cstat-no" title="statement not covered" >			return false;</span>
		}
	});
&nbsp;
<span class="cstat-no" title="statement not covered" >	if (bgColors !== null &amp;&amp; elmStack !== null) {</span>
		// Mix the colors together, on top of a default white
<span class="cstat-no" title="statement not covered" >		bgColors.push( new color.Color(255, 255, 255, 1));</span>
<span class="cstat-no" title="statement not covered" >		var colors = bgColors.reduce( color.flattenColors);</span>
<span class="cstat-no" title="statement not covered" >		return colors;</span>
	}
&nbsp;
<span class="cstat-no" title="statement not covered" >	return null;</span>
};
&nbsp;
/**
 * Determines whether an element has a fully opaque background, whether solid color or an image
 * @param {Element} node
 * @return {Boolean} false if the background is transparent, true otherwise
 */
<span class="cstat-no" title="statement not covered" >dom.isOpaque = <span class="fstat-no" title="function not covered" >function(node) {</span></span>
<span class="cstat-no" title="statement not covered" >	let style = window.getComputedStyle(node);</span>
<span class="cstat-no" title="statement not covered" >	return elmHasImage(node, style) || getBgColor(node, style).alpha === 1;</span>
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Thu Apr 27 2017 19:21:48 GMT+0000 (UTC)</div>
</div>
</body>
</html>
